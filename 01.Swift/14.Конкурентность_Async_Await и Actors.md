–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ\! –≠—Ç–æ —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ú—ã –Ω–µ –æ—Å—Ç–∞–≤–∏–º –∫–∞–º–Ω—è –Ω–∞ –∫–∞–º–Ω–µ.

–î–∞–≤–∞–π—Ç–µ –ø–æ–≥—Ä—É–∑–∏–º—Å—è –≤ —Å–∞–º—É—é —Å–ª–æ–∂–Ω—É—é, –Ω–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–º—É: **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å (Concurrency)**, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ —Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ–Ω–∞ –≤ Swift 5.5+ —Å –≤–≤–µ–¥–µ–Ω–∏–µ–º `async/await`.

---

## 21\. ‚è≥ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤ Swift: Async/Await –∏ Actors

### 21.1. –ü—Ä–æ–±–ª–µ–º–∞ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (The Concurrency Problem)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ (–æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫/UI-–ø–æ—Ç–æ–∫), **–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è** –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¥–æ–ª–≥–∏—Ö –∑–∞–¥–∞—á (—Å–µ—Ç—å, —Ñ–∞–π–ª–æ–≤—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥). –†–µ—à–µ–Ω–∏–µ ‚Äî –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–æ–ª–≥–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö.

- **–°—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å (GCD):** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å _–∑–∞–º—ã–∫–∞–Ω–∏—è_ (closures) –∏ _–æ—á–µ—Ä–µ–¥–∏_ (queues), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ **"–ê–¥—É –ó–∞–º—ã–∫–∞–Ω–∏–π" (Pyramid of Doom)** ‚Äî –≤–ª–æ–∂–µ–Ω–Ω–æ–º—É, –Ω–µ—á–∏—Ç–∞–µ–º–æ–º—É –∫–æ–¥—É.
- **–ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ì–æ–Ω–∫–∏ (Race Condition)**. –ï—Å–ª–∏ –¥–≤–∞ –ø–æ—Ç–æ–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–æ—Å–æ–±–µ–Ω–Ω–æ `class`), —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –æ—à–∏–±–∫–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—á—Ç–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–ª–∞–¥–∏—Ç—å.

### 21.2. –ù–æ–≤–∞—è –ú–æ–¥–µ–ª—å: Async/Await (–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏)

–ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ –æ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –µ–≥–æ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

#### –ê. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `async`

–§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è (–ø–æ–∫–∞ –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ç–∏), –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ `async`.

```swift
func fetchUserData(id: Int) async -> Data {
    // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç –¥–∞–Ω–Ω—ã–µ
    // –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–¥–µ—Å—å, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –ø–æ—Ç–æ–∫!
    let data = await URLSession.shared.data(from: url)
    return data
}
```

- `async`: –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç **–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è (suspend)** –∏ **–≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å—Å—è (resume)**.
- **"–ü–æ–¥ –ö–∞–ø–æ—Ç–æ–º":** –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫; –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–µ, –ø–æ–∑–≤–æ–ª—è—è –ø–æ—Ç–æ–∫—É –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏.

#### –ë. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `await`

–ß—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å `async` —Ñ—É–Ω–∫—Ü–∏—é, –≤—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `await`.

```swift
func displayUser() async { // –°–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å async
    let data = await fetchUserData(id: 101) // –ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–¥–µ—Å—å
    // –≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è 'data'
    process(data)
}
```

- `await`: –í—ã—Ä–∞–∂–∞–µ—Ç **—Ç–æ—á–∫—É –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏**. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `await` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, —á—Ç–æ–±—ã –≤—ã –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–ª–∏, –≥–¥–µ –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω.

### 21.3. üëÆ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ: –ê–∫—Ç–æ—Ä—ã (`Actors`)

**–ê–∫—Ç–æ—Ä—ã** ‚Äî —ç—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏. –û–Ω–∏ —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É **–°–æ—Å—Ç–æ—è–Ω–∏—è –ì–æ–Ω–∫–∏**.

#### –ê. –ß—Ç–æ —Ç–∞–∫–æ–µ –ê–∫—Ç–æ—Ä—ã?

–ê–∫—Ç–æ—Ä—ã ‚Äî —ç—Ç–æ **—Ç–∏–ø—ã-—Å—Å—ã–ª–∫–∏** (`Reference Types`), –∫–æ—Ç–æ—Ä—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫** –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∏—Ö **–∏–∑–º–µ–Ω—è–µ–º–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é** (—Å–≤–æ–π—Å—Ç–≤–∞–º) –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.

```swift
actor BankAccount {
    // –≠—Ç–∏ —Å–≤–æ–π—Å—Ç–≤–∞ - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫—Ç–æ—Ä–∞
    private var balance: Double = 0.0

    func deposit(amount: Double) {
        balance += amount
    }

    func getBalance() -> Double {
        return balance
    }
}
```

#### –ë. –ò–∑–æ–ª—è—Ü–∏—è –ê–∫—Ç–æ—Ä–∞ (`Actor Isolation`)

–ê–∫—Ç–æ—Ä—ã –¥–æ—Å—Ç–∏–≥–∞—é—Ç —Å–≤–æ–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, **–∏–∑–æ–ª–∏—Ä—É—è** —Å–≤–æ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

- –ö–æ–≥–¥–∞ –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ **–∏–∑–º–µ–Ω—è–µ–º–æ–º—É —Å–≤–æ–π—Å—Ç–≤—É** –∏–ª–∏ –≤—ã–∑–≤–∞—Ç—å **–º—É—Ç–∏—Ä—É—é—â–∏–π –º–µ—Ç–æ–¥** –∞–∫—Ç–æ—Ä–∞ **–∏–∑–≤–Ω–µ** –∞–∫—Ç–æ—Ä–∞, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä **–∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç** –≤–∞—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `await`.
- **–ü–æ—á–µ–º—É `await`?** –ü–æ—Ç–æ–º—É —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –¥–æ–∂–¥–∞—Ç—å—Å—è —Å–≤–æ–µ–π –æ—á–µ—Ä–µ–¥–∏, —á—Ç–æ–±—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞—à –∫–æ–¥ –Ω–∞ –ø–æ—Ç–æ–∫–µ –∞–∫—Ç–æ—Ä–∞, –∫–æ–≥–¥–∞ –æ–Ω –Ω–µ –∑–∞–Ω—è—Ç.

<!-- end list -->

```swift
let account = BankAccount()

// –î–æ—Å—Ç—É–ø –∫ –∞–∫—Ç–æ—Ä—É –∏–∑–≤–Ω–µ —Ç—Ä–µ–±—É–µ—Ç 'await'
let currentBalance = await account.getBalance() // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤

// account.deposit(100.0) // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è 'await'
await account.deposit(100.0) // –£—Å–ø–µ—Ö, –∞–∫—Ç–æ—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –µ–≥–æ 'balance' –º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç –∫–æ–¥.
```

- **–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:** –ë–µ–∑ `await` (–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ) –¥–æ—Å—Ç—É–ø –∫ –∏–∑–º–µ–Ω—è–µ–º–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é –∞–∫—Ç–æ—Ä–∞ **–Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω** (–æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏), —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

---

## 22\. üåê –†–∞–±–æ—Ç–∞ —Å –≠–∫–æ—Å–∏—Å—Ç–µ–º–æ–π: Foundation –∏ Codable

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –æ—Å–≤–æ–∏–ª–∏ —è–¥—Ä–æ, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–∞ –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –ª—é–±–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

### 22.1. Foundation Framework

**Foundation** ‚Äî —ç—Ç–æ –±–∞–∑–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ —á–∏—Å—Ç–æ–º —è–∑—ã–∫–µ Swift, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

| –¢–∏–ø Foundation            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                              |
| :------------------------ | :---------------------------------------------------------------------- |
| **`Date`**                | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏.                                          |
| **`URL`**                 | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ–±-–∞–¥—Ä–µ—Å–∞–º–∏.                                    |
| **`JSONEncoder/Decoder`** | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤/–∏–∑ JSON). |
| **`NotificationCenter`**  | –ü–∞—Ç—Ç–µ—Ä–Ω "–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å" –¥–ª—è —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.         |

### 22.2. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è: –ü—Ä–æ—Ç–æ–∫–æ–ª `Codable`

**`Codable`** ‚Äî —ç—Ç–æ **–ø—Å–µ–≤–¥–æ–Ω–∏–º —Ç–∏–ø–∞** –¥–ª—è –¥–≤—É—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤: **`Encodable`** (–¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ JSON) –∏ **`Decodable`** (–¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–∑ JSON). –≠—Ç–æ –≤–∞–∂–Ω–µ–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ Swift-–∫–æ–¥–∞.

#### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç "–ü–æ–¥ –ö–∞–ø–æ—Ç–æ–º"?

–í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö; Swift –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ü—Ä–æ—Ç–æ–∫–æ–ª–∞**.

```swift
// 1. –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º –µ–µ –ø–æ–¥ Codable
struct User: Codable {
    let username: String
    let email: String
}

// 2. –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∏–∑ JSON –≤ Swift-–æ–±—ä–µ–∫—Ç)
let jsonString = """{"username": "Alice", "email": "a@example.com"}"""
let jsonData = jsonString.data(using: .utf8)!

do {
    // JSONDecoder –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Codable –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π
    let user = try JSONDecoder().decode(User.self, from: jsonData)
    print(user.username) // Alice
} catch {
    print("–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: \(error)")
}
```

- **–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:** –ï—Å–ª–∏ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π –≤ –≤–∞—à–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ (`username`, `email`) **—Å–æ–≤–ø–∞–¥–∞—é—Ç** —Å –∏–º–µ–Ω–∞–º–∏ –ø–æ–ª–µ–π –≤ JSON, Swift –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å—é –ª–æ–≥–∏–∫—É –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –æ—à–∏–±–∫–∏ —Ä—É—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞.

---

## 23\. üîÄ –ò–Ω—Ç–µ—Ä–æ–ø–µ—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Å Objective-C

–ü–æ—Å–∫–æ–ª—å–∫—É Swift –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–≥—Ä–æ–º–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ Apple (—Ç–∞–∫–∏—Ö –∫–∞–∫ UIKit), –∑–Ω–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–æ–ø–µ—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ.

### 23.1. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `@objc`

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è Swift-–∫–æ–¥–∞ (–∫–ª–∞—Å—Å–æ–≤, –º–µ—Ç–æ–¥–æ–≤) –≤ Objective-C-–æ–∫—Ä—É–∂–µ–Ω–∏–∏.

```swift
class MyViewController: NSObject {
    @objc func buttonTapped() {
        // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π Objective-C –∫–æ–¥,
        // –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä –≤ UIKit.
    }
}
```

### 23.2. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `dynamic`

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ Swift –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏–∏** (–∫–∞–∫ –≤ Objective-C). –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è:

1.  **Key-Value Observing (KVO):** –°—Ç–∞—Ä—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å–≤–æ–π—Å—Ç–≤.
2.  **Runtime-–º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π:** –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

### 23.3. `@IBOutlet` –∏ `@IBAction`

–≠—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç—ã —è–≤–ª—è—é—Ç—Å—è —á–∏—Å—Ç–æ **—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º —Å–∞—Ö–∞—Ä–æ–º** –¥–ª—è –∏–Ω—Ç–µ—Ä–æ–ø–µ—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏:

- `@IBOutlet`: –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ –≤ —Ç–æ, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∏–∑ Interface Builder (Storyboard/XIB).
- `@IBAction`: –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–æ–¥ –≤ —Ç–æ, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–æ —Å–æ–±—ã—Ç–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∂–∞—Ç–∏–µ–º –∫–Ω–æ–ø–∫–∏) –∏–∑ Interface Builder.

---

## 24\. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (XCTest)

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –≤—Å–µ–≥–¥–∞ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–∞–º–∏. Apple –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ **XCTest**.

### 24.1. Unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ (—Ñ—É–Ω–∫—Ü–∏–π, –º–µ—Ç–æ–¥–æ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä).

```swift
import XCTest
@testable import MyApp // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—à –∫–æ–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

class DataTests: XCTestCase {

    func test_deposit_increasesBalance() {
        // 1. Given (–ù–∞—á–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è)
        let account = BankAccount()

        // 2. When (–î–µ–π—Å—Ç–≤–∏–µ)
        await account.deposit(amount: 100) // –ò—Å–ø–æ–ª—å–∑—É–µ–º await –¥–ª—è –∞–∫—Ç–æ—Ä–∞!
        let finalBalance = await account.getBalance()

        // 3. Then (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
        XCTAssertEqual(finalBalance, 100.0, "–ë–∞–ª–∞–Ω—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 100 –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è 100")
    }
}
```

- `XCTestCase`: –ö–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤.
- `XCTAssert...`: –§—É–Ω–∫—Ü–∏–∏ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

**–í—ã–≤–æ–¥:**

–ú—ã —Ç–µ–ø–µ—Ä—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ **–æ—Ö–≤–∞—Ç–∏–ª–∏ –≤–µ—Å—å —è–∑—ã–∫ Swift** –∏ –≤–∞–∂–Ω–µ–π—à–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –µ–≥–æ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥:

- **–Ø–∑—ã–∫:** –û—Å–Ω–æ–≤—ã, –û–û–ü, POP, –î–∂–µ–Ω–µ—Ä–∏–∫–∏, –û—à–∏–±–∫–∏.
- **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å:** `async/await` –∏ `Actors`.
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –∫–æ–¥:** `Codable`, Foundation, –ò–Ω—Ç–µ—Ä–æ–ø–µ—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç—å.
- **–ö–∞—á–µ—Å—Ç–≤–æ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –≤—Å—è –±–∞–∑–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ (UIKit/SwiftUI) –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ **–ª—é–±–æ–π** —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å.

**–ß—Ç–æ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è, –ø—Ä–æ–π–¥—è —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ, –∏–ª–∏ —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫?**
